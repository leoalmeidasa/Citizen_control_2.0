<header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <button
        class="navbar-toggler" type="button" data-mdb-toggle="collapse"
        data-mdb-target="#navbarNav" aria-controls="navbarNav"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-4">
          <li class="nav-item">
            <a class="nav-link"><%= link_to 'Endereço', addresses_path, class: "index-link" %></a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<div class="container-fluid">
  <p id="notice"><%= notice %></p>
  <h1 class="mb-3">Cidadão</h1>
  <%= search_form_for @q do |f| %>
    <div class="row">
      <div class="col-sm-4">
        <%= f.label :name %>
        <%= f.search_field :name_cont %>
      </div>
      <div class="col-sm-4">
        <%= f.label :status_eq, 'Ativo' %>
        <%= f.select :status_eq, [['Sim', true], ['Não', false]], include_blank: 'Todos' %>
      </div>
      <div class="col-sm-4">
        <%= link_to "Limpar", request.path, class: 'btn btn-light' %>
        <%= f.submit class: 'btn btn-primary' %>
        <% end %>
      </div>
    </div>
</div>

<div class="table-responsive ">
  <table class="table table-striped center">
    <thead>
    <tr>
      <th><%= sort_link(@q, :name, "Nome")%></th>
      <th><%= sort_link(@q, :cpf, "CPF")%></th>
      <th><%= sort_link(@q, :cns, "CNS")%></th>
      <th><%= sort_link(@q, :email, "Email")%></th>
      <th><%= sort_link(@q, :birth_date, "Data de Nascimento")%></th>
      <th><%= sort_link(@q, :telephone, "Telefone")%></th>
      <th><%= sort_link(@q, :status, "Status")%></th>
      <th>Foto</th>
      <th colspan="3"></th>
    </tr>
    </thead>

    <tbody>
    <% @citizens.each do |citizen| %>
      <tr class="table-info">
        <td><%= citizen.name %></td>
        <td><%= citizen.cpf %></td>
        <td><%= citizen.cns %></td>
        <td><%= citizen.email %></td>
        <td><%= citizen.birth_date %></td>
        <td><%= citizen.telephone %></td>
        <td><%= citizen.status ? "Ativo" : "Inativo" %></td>
        <td><%= image_tag citizen.photo, size:'50x50' if citizen.photo.attached? %></td>
        <td><%= link_to 'Mostrar', citizen, class: "btn btn-outline-info" %></td>
        <td><%= link_to 'Editar', edit_citizen_path(citizen), class: "btn btn-outline-warning" %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>


<%= link_to 'Novo Cidadão', new_citizen_path, class: "btn btn-outline-success"%>